//tealium universal tag - utag.545 ut4.0.202412121107, Copyright 2024 Tealium.com Inc. All Rights Reserved.
(function(t){var signal=window[t]=window[t]||[];if(!signal.init)if(signal.loaded)window.console&&console.error&&console.error("Signal snippet included twice.");else{signal.loaded=!0,signal.methods=["init","debug","browser","session","identity","forget","event"],signal.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),signal.push(e),signal}};for(var n=0;n<signal.methods.length;n++){var r=signal.methods[n];signal[r]=signal.factory(r)}}})("signal");try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.map={"tealium_event:search_view":"ProductSearch","tealium_event:purchase":"OrderCompletion","tealium_event:user_login":"Identity","tealium_event:user_register":"Identity","tealium_event:product_view":"ProductPageView","search_term":"search_term"};u.extend=[];u.clearEmptyKeys=function(object){Object.keys(object).forEach(function(key){if(object[key]===""||object[key]===undefined){delete object[key];}});return object;};u.dispatchEvent=function(type,data){var helpers={makeOrder:function(data){return u.clearEmptyKeys({discount:data.order_discount,items:helpers.makeOrderItems(data),processedAt:data.order_processed_at,referenceId:data.order_id,source:data.source,subtotal:data.order_subtotal,tags:data.metadata_tags,attributes:data.metadata_attributes});},makeOrderItems:function(data){if(data.product_id&&data.product_id.length){return data.product_id.map(function(_,i){return u.clearEmptyKeys({discount:data.product_discount&&data.product_discount[i],name:data.product_name&&data.product_name[i],price:data.product_unit_price&&data.product_unit_price[i],quantity:data.product_quantity&&data.product_quantity[i],referenceId:data.product_id&&data.product_id[i],tags:data.metadata_tags,attributes:data.metadata_attributes});});}
return[];},makeProducts:function(data){if(data.product_id&&data.product_id.length){return data.product_id.map(function(_,i){return u.clearEmptyKeys({name:data.product_name&&data.product_name[i],referenceId:data.product_id&&data.product_id[i],variants:helpers.makeProductVariants(data,i),tags:data.metadata_tags,attributes:data.metadata_attributes});});}
return[];},makeProductVariants:function(data,j){if(data.product_variant_id&&data.product_variant_id.length){return data.product_variant_id
.map(function(_,i){if((data.product_variant_product_id&&data.product_variant_product_id[i])===(data.product_id&&data.product_id[j])){return u.clearEmptyKeys({name:data.product_variant_name&&data.product_variant_name[i],referenceId:data.product_variant_id&&data.product_variant_id[i],price:data.product_variant_price&&data.product_variant_price[i],tags:data.metadata_tags,attributes:data.metadata_attributes});}
return null;})
.filter(Boolean);}
if(data.product_id&&data.product_id[j]){return[u.clearEmptyKeys({name:data.product_name&&data.product_name[j],referenceId:data.product_id&&data.product_id[j],price:data.product_unit_price&&data.product_unit_price[j],tags:data.metadata_tags,attributes:data.metadata_attributes})];}
return[];}};var events={Forget:function(){signal.forget();},Identity:function(data){signal.identity(u.clearEmptyKeys({contactId:data.contact_id,emailAddress:data.customer_email,referenceId:data.customer_id,source:data.source,tags:data.metadata_tags,attributes:data.metadata_attributes}));},OrderCancelation:function(data){signal.event("orderCancelation",u.clearEmptyKeys({order:helpers.makeOrder(data),tags:data.metadata_tags,attributes:data.metadata_attributes}));},OrderCompletion:function(data){signal.event("orderCompletion",u.clearEmptyKeys({order:helpers.makeOrder(data),tags:data.metadata_tags,attributes:data.metadata_attributes}));},OrderRefund:function(data){signal.event("orderRefund",u.clearEmptyKeys({order:helpers.makeOrder(data),tags:data.metadata_tags,attributes:data.metadata_attributes}));},PageView:function(data){signal.event("pageView",u.clearEmptyKeys({referrer:data.page_referrer,source:data.source,title:data.page_title,url:data.page_url,tags:data.metadata_tags,attributes:data.metadata_attributes}));},ProductPageView:function(data){signal.event("productPageView",u.clearEmptyKeys({product:helpers.makeProducts(data)[0],referrer:data.page_referrer,source:data.source,title:data.page_title,url:data.page_url,tags:data.metadata_tags,attributes:data.metadata_attributes}));},ProductSearch:function(data){signal.event("productSearch",u.clearEmptyKeys({products:helpers.makeProducts(data),query:data.search_term,tags:data.metadata_tags,attributes:data.metadata_attributes}));}};if(events[type]){events[type](utag.loader.GV(data));}};u.dispatchAllEvents=function(events){events.forEach(function(event){u.dispatchEvent(event,u.data);});};u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:545");utag.DB(data_layer);var a,b,c,d;a=utag_event;b=data_layer;var events=[];u.data={config_access_token:"public_17b8086935061a4433dc91ced5d9b225",config_base_url:"https://track.coherentpath.com",config_currency_code:"USD",config_debug:false,config_src_url:"https://track.coherentpath.com/v1/track.js",metadata_attributes:undefined,metadata_tags:undefined,contact_id:"",customer_email:"",order_discount:"",order_processed_at:"",page_referrer:"",page_title:"",page_url:"",product_variant_id:[],product_variant_name:[],product_variant_price:[],product_variant_product_id:[],search_term:"",source:"",customer_id:"",order_id:"",order_subtotal:"",product_discount:[],product_id:[],product_name:[],product_quantity:[],product_unit_price:[]};utag.DB("send:545:EXTENSIONS");utag.DB(data_layer);Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");destinations.forEach(function(parameter){u.data[parameter]=data_layer[mapping_key];});}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){events=events.concat(u.map[mapping_key].split(","));}}}});utag.DB("send:545:MAPPINGS");utag.DB(u.data);var eCommerceMapping=[{eCommerceData:b._ccustid,name:"customer_id",isArray:false},{eCommerceData:b._corder,name:"order_id",isArray:false},{eCommerceData:b._csubtotal,name:"order_subtotal",isArray:false},{eCommerceData:b._cpdisc,name:"product_discount",isArray:true},{eCommerceData:b._cprod,name:"product_id",isArray:true},{eCommerceData:b._cprodname,name:"product_name",isArray:true},{eCommerceData:b._cquan,name:"product_quantity",isArray:true},{eCommerceData:b._cprice,name:"product_unit_price",isArray:true}];eCommerceMapping.forEach(function(dataObject){if(!dataObject.isArray){u.data[dataObject.name]=u.data[dataObject.name]||dataObject.eCommerceData||"";}else if(u.data[dataObject.name].length===0&&dataObject.eCommerceData!==undefined&&dataObject.isArray){u.data[dataObject.name]=dataObject.eCommerceData.slice(0);}});if(!u.data.config_src_url||!u.data.config_access_token){utag.DB(u.id+": Tag not fired: Required attribute config_src_url or config_access_token not populated");return;}
if(u.initialized){u.dispatchAllEvents(events);}
if(!u.scriptrequested){u.scriptrequested=true;utag.ut.loader({type:"script",src:u.data.config_src_url,cb:function(){u.initialized=true;signal.init(u.data.config_access_token,{baseUrl:u.data.config_base_url,currencyCode:u.data.config_currency_code});signal.debug(u.data.config_debug);u.dispatchAllEvents(events);},loc:"script",id:"utag_545",attrs:{}});}
utag.DB("send:545:COMPLETE");}};utag.o[loader].loader.LOAD(id);})("545","adidas.adidasglobal");}catch(error){utag.DB(error);}
